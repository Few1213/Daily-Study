window.ec||(window.ec={});ol.pkg=function(j,h,g){var b,d,u;if(arguments.length==3){b=j;d=h;u=g}else{b=window;d=j;u=h}if(!d||!d.length){return null}var m=d.split(".");for(var l=b,k=0;k<m.length-1;k++){l[m[k]]||(l[m[k]]={});l=l[m[k]]}l=(l[m[m.length-1]]=u||l[m[m.length-1]]||{});return l};ol.define=function(a,l,k){var m=window,j,d;if(arguments.length==3){m=a;j=l;d=k}else{j=a;d=l}var g=j.split("."),y,h;for(var b=m,n=0;n<g.length-1;n++){b[g[n]]||(b[g[n]]={});b=b[g[n]]}h=g[g.length-1];y=b[h];if(!y){y=b[h]=function(){var p=arguments.callee,o=p._define,q;for(var c=arguments.length,f=c+10;c<f;c++){q=o[h+"_"+c];if(q){o[h+"_"+arguments.length]=o[h+"_"+c];break}}if(!q){q=o[h+"_0"]}if(!q){if(logger&&logger.error){logger.error(j,"function is undefined.")}return}q.apply(p,arguments)};y._define={}}y._define[h+"_"+d.length]=d};ol.Cache={_cache:{},_size:0,set:function(b,a){if(!ol.Cache.contains(b)){ol.Cache._size++}ol.Cache._cache[b]=a;return a},get:function(d,a){var b=ol.Cache;var c=b._cache[d];if(c){return c}if(typeof(a)=="function"){c=a();b._cache[d]=c}else{if(a){c=a;b._cache[d]=c}else{c=jQuery(d);b._cache[d]=c}}b._size++;return c},remove:function(a){ol.Cache._size--;ol.Cache._cache[a]=null},contains:function(a){return ol.Cache._cache[a]}};ol.Plugin={if_jquery:function(a,b){try{var c=arguments.callee;b=b||2;if(typeof(jQuery)!="undefined"){a(jQuery)}else{if(b==0){return}setTimeout(function(){c(a,b-1)},1000)}}catch(d){if(ol.debug){throw d}}},if_jsapi:function(a){try{if(typeof(ol)!="undefined"&&typeof(ol.ready)!="undefined"){a(ol)}}catch(b){if(ol.debug){throw b}}}};if(ol.isIE6||ol.isIE7){document.nativeGetElementById=document.getElementById;document.getElementById=function(a){var c=document.nativeGetElementById(a);if(c){if(c.attributes.id.value==a){return c}else{for(var b=1;b<document.all[a].length;b++){if(document.all[a][b].attributes.id.value==a){return document.all[a][b]}}}}return null}}if(ol.isIE6){try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}}ol.pkg("ol.ui");(function(){var b=function(){var c={};c.width=ol.ui.masker._bwidth;c.height=ol.ui.masker._bheight;ol.Cache.get("ec_mask").css(c)};var a={css:{opacity:0.2,background:"#000"}};ol.ui.masker={isShown:false,mask:function(d){var j=jQuery;var f=ol.ui.masker;if(f.isShown){return}d=j.extend(true,{},a,d);var c=ol.Cache.get("ec_mask",function(){j(window).resize(function(){if(ol.ui.masker.isShown){return}ol.Cache.get("ec_mask").css({width:f._bwidth(),height:f._bheight()})});return j("<div id='ec_mask' class='ec_mask'></div>").appendTo("body").bgiframe()});f.isShown=true;d.css.width=f._bwidth();d.css.height=f._bheight();d.css.visibility="visible";c.css(d.css);j(window).bind("resize",b)},unmask:function(){ol.ui.masker.isShown=false;ol.Cache.get("ec_mask").css({visibility:"hidden",width:0,height:0});jQuery(window).unbind("resize",b)},_bheight:function(){var d=jQuery;if(d.browser.msie&&d.browser.version<7){var c=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);var g=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(c<g){return d(window).height()}else{return c}}else{return d(document).height()}},_bwidth:function(){var d=jQuery;if(d.browser.msie&&d.browser.version<7){var g=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);var c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(g<c){return d(window).width()}else{return g}}else{return d(document).width()}}}})();(function(){var a={event:"hover",menu:null};ol.ui.dropdown=function(b,d){var c=this;c.hideTimer=null;c._objItem;c._menuItem;c._onMenu=false;c._events={};c._isShow=false;c._hideMenu=function(){c.hideTimer=setTimeout(c.hide,100)};c.init=function(){var f=jQuery;d=f.extend({},a,d);if(d.event=="hover"){d.event="mouseover"}else{d.event="click"}c._objItem=f(b);c._menuItem=d.menu?f(d.menu):c._objItem.next();c._objItem.unbind(d.event).bind(d.event,function(g){clearTimeout(c.hideTimer);c.show()});c._menuItem.find(".dropdown_item").bind("click",function(){setTimeout(c.hide)})};c.bind=function(f,j,g){c._menuItem.find(f).bind(j,g)};c.show=function(){switch(d.event){case"mouseover":c._objItem.unbind("mouseout").bind("mouseout",function(f){c._hideMenu();c._objItem.addClass("hover")});c._menuItem.unbind("mouseover").bind("mouseover",function(){clearTimeout(c.hideTimer);c._menuItem.css("display","block")}).unbind("mouseout").bind("mouseout",function(){c._hideMenu()});break;case"click":if(c._isShow){c.hide();return}else{c._events.menu_click=function(){c._onMenu=true};c._events.document_click=function(f){if(f.button!=0){return true}if(c._onMenu===false){c.hide()}c._onMenu=false};setTimeout(function(){c._menuItem.bind("click",c._events.menu_click);jQuery(document).bind("click",c._events.document_click)},1)}break}c._objItem.addClass("hover");c._menuItem.css("display","block");c._isShow=true};c.hide=function(){if(c._events.document_click){jQuery(document).unbind("click",c._events.document_click)}if(c._events.menu_click){c._menuItem.unbind("click",c._events.menu_click)}c._objItem.removeClass("hover");c._menuItem.hide();c._isShow=false;c._onMenu=false};this.init()}})();ol.ui.scrollTo=function(p,d){d=d||{offsetY:45};if(typeof(p)!="object"){var h=p.toString().substr(0,1);if(!(h=="#"||h==".")){p="#"+p}p=jQuery(p)}if(p.length==0){return}var g=p.offset().top;var f=(document.documentElement&&!/webkit/ig.test(navigator.userAgent)?document.documentElement:document.body);var b=jQuery(window).height();var a=f.scrollTop;if(!(a<g&&g<a+b)){f.scrollTop=g-d.offsetY}};(function(){var b={white:{opacity:0.55,background:"#fff"},black:{opacity:0.2,background:"#000"}};var a={selector:"#ec_ui_loading",css:null,modal:true,maskConfig:null};ol.ui.loading={options:null,show:function(g){var h=ol.ui.loading;if(typeof(g)=="string"){g={maskConfig:{css:b[g]}}}h.options=jQuery.extend(true,{},a,g);if(h.options.modal){ol.ui.masker.mask(h.options.maskConfig)}var d=jQuery(h.options.selector);if(d.length==0){d=jQuery('<div id="ec_ui_loading" class="ec_ui_loading"></div>').appendTo("body")}d.css(h.options.css);if(ol.isIE6||ol.isIE&&document.compatMode==="BackCompat"){var c=jQuery(window),n=c.scrollTop(),f=c.scrollLeft();n+=(c.height()-d.height())/2;f+=(c.width()-d.width())/2;d.css({top:n,left:f})}d.show();d=null;h=null},hide:function(){var c=ol.ui.loading.options;if(c){if(c.modal){ol.ui.masker.unmask()}jQuery(c.selector).hide()}}}})();(function(){var a={row:"tr",colors:["#fff","#f7f7f7"],hover:"#e3f3bf",index:1,remain:0,alterNum:1};ol.ui.alternation=function(b,c){var d=jQuery;function j(h,g){var f=this;this.container=d(h);this.data={};this.rows=null;this.init=function(){this.rows=this.container.find(g.row);var k;var p;for(var l=0;l<this.rows.length;l++){k=this.rows[l];k.setAttribute("alternation",l);p=k.getAttribute("group");this.data[l]={group:p,backgroundColor:""}}};this.bindColor=function(){if(!g.colors){return}var k=this.rows.length-g.remain;for(var m=g.index;m<k;){for(var l=0;l<g.colors.length&&m<k;l++){row=this.rows[m];row.style.backgroundColor=g.colors[l];this.data[m].backgroundColor=g.colors[l];m=m+g.alterNum}}};this.bindEvent=function(){this.rows.unbind("mouseover").bind("mouseover",function(){var k=d(this);var p=k.attr("alternation");var o=f.data[p];if(g.hover){k.css("backgroundColor",g.hover)}if(o.group){f.container.find(g.row+"[group="+o.group+"]").addClass("hover")}}).unbind("mouseout").bind("mouseout",function(){var k=d(this);var p=k.attr("alternation");var o=f.data[p];if(g.hover){k.css("backgroundColor",o.backgroundColor)}if(o.group){f.container.find(g.row+"[group="+o.group+"]").removeClass("hover")}})};this.init();this.bindColor();this.bindEvent()}c=d.extend({},a,c);d(b).each(function(){new j(this,c)})}})();(function(){var a=function(u,k,h,g){if(u.nodeType===3){var d=u.data.match(k);if(d){var b=document.createElement(h||"span");b.className=g||"ec_ui_highlight highlight";var j=u.splitText(d.index);j.splitText(d[0].length);var f=j.cloneNode(true);b.appendChild(f);j.parentNode.replaceChild(b,j);return 1}}else{if((u.nodeType===1&&u.childNodes)&&!/(script|style)/i.test(u.tagName)&&!(u.tagName===h.toUpperCase()&&u.className===g)){for(var c=0;c<u.childNodes.length;c++){c+=a(u.childNodes[c],k,h,g)}}}return 0};ol.ui.highlight=function(j,d,h){var t={className:null,element:"span",caseSensitive:false,wordsOnly:false};jQuery.extend(t,h);if(d.constructor===String){d=[d]}d=jQuery.grep(d,function(l,k){return l!=""});if(d.length==0){return this}var f=d.join("|");f=f.replace(/([\\\$\{\}\(\)\[\]\+\?\-\>\<\^\!\.\*])/g,"\\$1");var c=t.caseSensitive?"":"i";var b="("+f+")";if(t.wordsOnly){b="\\b"+b+"\\b"}var g=new RegExp(b,c);var u=j;if(typeof(j)=="string"){u=ol.Cache.get(j)}return u.each(function(){a(this,g,t.element,t.className)})}})();(function(){var a={_ec_ui_alert:{_default:{title:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02be",zIndex:399,showCancel:false,modal:false,draggable:false,focus:".box-ok:first",width:300,clickOut:function(d){d.close()}}},_ec_ui_info:{},_ec_ui_warn:{},_ec_ui_error:{}};function c(g,h,f){var d=ol.Cache.get;var l=d(h.boxid,function(){return new ol.box(null,h)});l.open(g);if(f.timeout){if(a[h.boxid].timer){clearTimeout(a[h.boxid].timer)}a[h.boxid].timer=setTimeout(function(){if(ol.isIE6){l.close()}else{l.fadeOut(800)}},f.timeout);d("#"+h.boxid).unbind("mouseover").bind("mouseover",function(){clearTimeout(a[h.boxid].timer)}).unbind("mouseout").bind("mouseout",function(){a[h.boxid].timer=setTimeout(function(){if(ol.isIE6){l.close()}else{l.fadeOut(800)}},f.timeout/2)})}}var b={title:"\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\u02be",zIndex:399,showButton:false,modal:false,draggable:false,focus:".box-close",width:300};ol.ui.warn=function(f,g){g=jQuery.extend({},b,g);g.boxid="_ec_ui_warn";g.boxclass="ec_ui_warn";var d={timeout:g.timeout};delete g.timeout;c(f,g,d)};ol.ui.info=function(f,g){g=jQuery.extend({},b,g);g.boxid="_ec_ui_info";g.boxclass="ec_ui_info";var d={timeout:g.timeout};delete g.timeout;c(f,g,d)};ol.ui.error=function(f,g){g=jQuery.extend({},b,g);g.boxid="_ec_ui_error";g.boxclass="ec_ui_error";var d={timeout:g.timeout};delete g.timeout;c(f,g,d)};ol.ui.alert=function(f,g){g=jQuery.extend({},a._ec_ui_alert._default,g);g.boxid="_ec_ui_alert";g.boxclass="ec_ui_alert";var d=ol.Cache.get(g.boxid,function(){return new ol.box(null,g)});d.setTitle(g.title);d.open(f)}})();(function(){var a={style:"style1",offsetX:0,offsetY:0},b='<div class="ec_ui_ballon"><div id="ballon_header"></div><div id="ballon_body"></div><div id="ballon_footer"></div></div>';ol.ui.ballon=function(d,g,h){h=jQuery.extend({},a,h);var n=jQuery(d);var c=jQuery(b);var f;c.find("#ballon_body").html(g||"");n.mouseover(function(){f=setTimeout(function(){var j=h.offsetX||0;var m=h.offsetY||0;var l=n.offset().top+n.height();var k=n.offset().left;k=Math.max(k+j,0);l=Math.max(l+m,0);c.css({display:"block",top:l,left:k}).addClass(h.style);c.appendTo("body").bgiframe()},250)}).mouseout(function(){clearTimeout(f);c.remove()});return ol.ui}})();(function(){var a={css:null,captureInput:false};ol.ui.hover=function(c,b){var d=jQuery;b=d.extend(true,{},a,b);d(c).each(function(){var h=null;var j=false;var g=false;var f=d(this);var p=function(){if(j||g){return}if(b.css){h=f.attr("style");f.css(b.css)}else{f.addClass("hover")}};var o=function(){if(j||g){return}if(b.css){f.attr("style",h)}else{f.removeClass("hover")}};f.mouseover(function(){p();g=true}).mouseout(function(){g=false;o()});if(this.tagName=="INPUT"||this.tagName=="TEXTAREA"){f.focus(function(){p();j=true}).blur(function(){j=false;o()})}else{if(b.captureInput){f.find("input[type=text],textarea").bind("focus",function(){p();j=true}).bind("blur",function(){j=false;o()})}}});return ol.ui}})();ol.pkg("ol.lang");if(!Array.prototype.indexOf){Array.prototype.indexOf=function(p,h){if(!ol.util.isArray(this)){return -1}var c,a,g="\0";if(h!=null){c=this.slice(h);a=h}else{c=this;a=0}var f=g+c.join(g)+g,b=f.indexOf(g+p+g);if(b==-1){return -1}a+=f.slice(0,b).replace(/[^\0]/g,"").length;return a}}Array.prototype.clone=function(){return this.slice(0)};String.prototype.endWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substring(this.length-a.length)==a){return true}else{return false}return true};String.prototype.startWith=function(a){if(a==null||a==""||this.length==0||a.length>this.length){return false}if(this.substr(0,a.length)==a){return true}else{return false}return true};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}}String.prototype.len=function(){return this.replace(/[^\x00-\xff]/g,"aa").length};String.prototype.replaceAll=function(b,a){return this.replace(new RegExp(b,"gm"),a)};String.prototype.parseDate=function(c){var j={"\\.":{v:"\\."},"\\?":{v:"\\?"},"M+":{v:"(0[1-9]|1[0-2]|[1-9])",k:"MM"},"d+":{v:"(3[01]|[12][0-9]|0[1-9]|[1-9])",k:"dd"},"y+":{v:"(\\d{4})",k:"yyyy"},"H+":{v:"(2[0-3]|[01][0-9]|[0-9])",k:"HH"},"m+":{v:"([0-5][0-9]|[0-9])",k:"mm"},"s+":{v:"([0-5][0-9]|[0-9])",k:"ss"},S:{v:"(\\d+)",k:"S"}};var b=[];var l=c;var m;var n;for(var a in j){if((m=c.search(new RegExp("("+a+")")))!=-1){n=j[a];l=l.replace(RegExp.$1,n.v);if(n.k){b.push({n:n.k,order:m})}}}b.sort(function(k,d){return k.order-d.order});n={};for(var y=0;y<b.length;y++){n[b[y].n]=y+1}var h=this.match(new RegExp(l));if(!h){throw"Invalid String for parse to Date!"}var f=new Date();if(n.yyyy){f.setFullYear(h[n.yyyy])}if(n.dd){var g=h[n.dd];f.setDate(g);f.setDate(g)}else{f.setDate(1);f.setDate(1)}if(n.MM){f.setMonth(h[n.MM]-1)}if(n.HH){f.setHours(h[n.HH])}else{f.setHours(0)}if(n.mm){f.setMinutes(h[n.mm])}else{f.setMinutes(0)}if(n.ss){f.setSeconds(h[n.ss])}else{f.setSeconds(0)}if(n.S){f.setMilliseconds(h[n.S])}else{f.setMilliseconds(0)}return f};Date.prototype.format=function(a){var d={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};var c={"0":"\u65e5","1":"\u4e00","2":"\u4e8c","3":"\u4e09","4":"\u56db","5":"\u4e94","6":"\u516d"};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}if(/(E+)/.test(a)){a=a.replace(RegExp.$1,((RegExp.$1.length>1)?(RegExp.$1.length>2?"\u661f\u671f":"\u5468"):"")+c[this.getDay()+""])}for(var b in d){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(d[b]):(("00"+d[b]).substr((""+d[b]).length)))}}return a};if(!
/*@cc_on!@*/
0&&window.JSON&&window.JSON.parse&&window.JSON.stringify){ol.lang.json=(function(){var a=/___$/;return{parse:function(c){try{return window.JSON.parse(c)}catch(b){return false}},stringify:function(c){try{return window.JSON.stringify(c,function(d,g){return !a.test(d)?g:null})}catch(b){return null}}}})()}else{ol.lang.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(k.match("___$")){continue}if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}()}ol.pkg("ol.util");ol.util.trim=function(a){if(a==null){return""}if(typeof(a)!="string"){return a}return a.trim()};ol.util.left=function(a,c,d){if(a.len()<c){return a}var b=0;for(var l=0;l<a.length;l++){if(a.charCodeAt(l)>128){b=b+2}else{b=b+1}if(b>c){return a.substring(0,l)+(d?d:"")}}return a};ol.util.isEmpty=function(a){if(ol.util.trim(a)==""){return true}return false};ol.util.isDate=function(a){if(a==null||a==""){return false}re=/\d{4}-{1}\d{2}-{1}\d{2}$/;return a.match(re)};ol.util.isNumeric=function(a){strRef="1234567890";if(a==""){return false}for(i=0;i<a.length;i++){tempChar=a.substring(i,i+1);if(strRef.indexOf(tempChar,0)==-1){return false}}return true};ol.util.isFloat=function(b){var a=/^[0-9]+.?[0-9]*$/;return a.test(s)};ol.util.isEmail=function(d,f){if(!d){return false}var c=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/i;var n=new RegExp(c);var a;if(f){a=d.split(f)}else{a=[d]}for(var b=0;b<a.length;b++){if(a[b].match(n)==null){return false}}return true};ol.util.escapeHtml=function(a){if(typeof(a)!="string"){return a}if(ol.util.isEmpty(a)){return""}a=a.replaceAll("&","&amp;");a=a.replaceAll('"',"&quot;");a=a.replaceAll(" ","&nbsp;");a=a.replaceAll("<","&lt;");a=a.replaceAll(">","&gt;");a=a.replaceAll("'","&#039;");a=a.replaceAll("\r\n","<br/>");a=a.replaceAll("\n","<br/>");a=a.replaceAll("\r","<br/>");return a};ol.util.unescapeHtml=function(a){if(typeof(a)!="string"){return a}if(ol.util.isEmpty(a)){return""}a=a.replaceAll("&quot;",'"');a=a.replaceAll("&nbsp;"," ");a=a.replaceAll("&lt;","<");a=a.replaceAll("&gt;",">");a=a.replaceAll("&#039;","'");a=a.replaceAll("<br>","\n");a=a.replaceAll("<br/>","\n");a=a.replaceAll("&#61;","=");a=a.replaceAll("&amp;","&");return a};ol.util.isFunction=function(a){if(!a){return false}return Object.prototype.toString.call(a)==="[object Function]"};ol.util.isArray=function(a){if(!a){return false}return Object.prototype.toString.call(a)==="[object Array]"};ol.util.isObject=function(a){if(!a){return false}return Object.prototype.toString.call(a)==="[object Object]"};ol.util.cookie={get:function(a){var f=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var c=0;c<n.length;c++){var d=(n[c]||"").replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"");if(d.substring(0,a.length+1)==(a+"=")){var b=function(h){h=h.replace(/\+/g," ");var g='()<>@,;:\\"/[]?={}';for(var j=0;j<g.length;j++){if(h.indexOf(g.charAt(j))!=-1){if(h.startWith('"')){h=h.substring(1)}if(h.endWith('"')){h=h.substring(0,h.length-1)}break}}return decodeURIComponent(h)};f=b(d.substring(a.length+1));break}}}return f},set:function(r,f,d){d=d||{};if(f===null){f="";d.expires=-1}var b="";if(d.expires&&(typeof d.expires=="number"||d.expires.toUTCString)){var c;if(typeof d.expires=="number"){c=new Date();c.setTime(c.getTime()+(d.expires*24*60*60*1000))}else{c=d.expires}b="; expires="+c.toUTCString()}var a="; path="+(d.path||"/");var g=d.domain?"; domain="+(d.domain):"";var h=d.secure?"; secure":"";document.cookie=[r,"=",encodeURIComponent(f),b,a,g,h].join("")},remove:function(a){this.set(a,null)}};ol.Plugin.if_jquery(function(a){ol.Plugin.if_jsapi(function(c){ol._setLoadStatus("jquery.bgiframe","complete")});a.fn.bgiframe=(a.browser.msie&&/msie 6\.0/i.test(navigator.userAgent)?function(d){d=a.extend({top:"auto",left:"auto",width:"auto",height:"auto",opacity:true,src:"javascript:false;"},d);var c='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+d.src+'"style="display:block;position:absolute;z-index:-1;'+(d.opacity!==false?"filter:Alpha(Opacity='0');":"")+"top:"+(d.top=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+'px')":b(d.top))+";left:"+(d.left=="auto"?"expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+'px')":b(d.left))+";width:"+(d.width=="auto"?"expression(this.parentNode.offsetWidth+'px')":b(d.width))+";height:"+(d.height=="auto"?"expression(this.parentNode.offsetHeight+'px')":b(d.height))+';"/>';return this.each(function(){if(a(this).children("iframe.bgiframe").length===0){this.insertBefore(document.createElement(c),this.firstChild)}})}:function(){return this});a.fn.bgIframe=a.fn.bgiframe;function b(c){return c&&c.constructor===Number?c+"px":c}});ol.Plugin.if_jquery(function(a){a.fn.check=function(b){switch(b){case true:return this.each(function(){this.checked=true});break;case false:return this.each(function(){this.checked=false});break;default:return this.each(function(){this.checked=!this.checked})}};a.fn.select=function(b){return this.each(function(){a(this).val(b)})}});ol.pkg("ol.form.input");(function(){var a=0;ol.form.input.label=function(b,j,c){if(!j){throw ("Please set label text!");return ol.form.input}var d=jQuery;c=d.extend({},ol.form.input.label.defaults,c);d(b).each(function(){var q=d(this),k=q.attr("id"),g=Number(q.css("z-index"))||1,A=parseInt(q.css("margin-top"),10)+parseInt(q.css("border-top-width"),10),p=parseInt(q.css("margin-left"),10)+parseInt(q.css("border-left-width"),10),h=d('<label style="display:none;position:absolute;cursor:text;float:left;z-index:'+(g+1)+'">'+j+"</label>").attr("class",q.attr("class")),f=d('<input style="border:none;background:transparent;cursor:text;margin:0;" value="'+j+'" tabindex=-1 readonly>');if("TEXTAREA"==q.attr("tagName")){f.css("height","auto")}if(!k&&c.autoId){k="input_label_"+(a++);q.attr("id",k)}var l={color:c.color};h.attr("for",k).css(l);q.css("z-index",g).before(h);var o=q.parents("form");if(o.length>0){o.bind("reset",function(){setTimeout(function(){n()},150)})}var n=function(){if(q.attr("value").length==0){h.css("display","block")}},m=function(){h.css("display","none")};q.bind("blur",n).bind("focus",m);if(document.activeElement!=q[0]){n()}});return ol.form.input}})();ol.form.input.label.defaults={color:"#999",autoId:true};(function(){var b={max:Number.MAX_VALUE,exceedCallback:null},a=function(j){var d=j.length,f=j.replace(/[^\x00-\xff]/g,"").length,c=(f%2==0?f/2:parseInt(f/2)+1)+(d-f);return c};ol.form.input.wordCount=function(g,c){var d=jQuery;opt=d.extend({},b,c);d(g).each(function(j){if(typeof(opt.callback)=="function"){var f=a(this.value);opt.callback.call(this,f);if(f>opt.max&&opt.exceedCallback){opt.exceedCallback.call(this,f)}}d(this).bind("keyup",function(){var h=a(this.value);if(typeof(opt.callback)=="function"){opt.callback.call(this,h)}if(h>opt.max&&opt.exceedCallback){opt.exceedCallback.call(this,h)}})})}})();ol.pkg("ol.form.validator");(function(){var g=function(m,l){if(logger&&logger.warn){logger.warn(m,l)}},a=function(m,l){if(logger&&logger.error){logger.error(m,l)}},j={trim:true,validOnChange:false,allowEmpty:true,async:true,errorClass:null,successFunction:null,errorFunction:null};var b={};var k={};var x=function(q,t,m,n,r,l){jQuery.extend(l,m);if(n){r=k[n];if(!r){g(n+" rule is undefined!");return true}}var o;if(n){l.type=n}if(r.length==3){o=r(q,t,l)}else{o=r(q,l)}if(!o){if(l.errorFunction){var p=function(){if(m.errorClass&&t){t.addClass(m.errorClass)}l.errorFunction(t||q,l)};if(m.async){setTimeout(p,1)}else{p()}}return false}return true};var c=function(q,r,n,l){if(!n.type){if(!x(q,r,n,null,n.rule,l)){return false}}else{var o=n.type;if(typeof(n.type)=="string"){o=[n.type]}var p={};for(var m=0;m<o.length;m++){if(!p[o[m]]){if(!x(q,r,n,o[m],null,l)){return false}p[o[m]]=1}}}return true};var d=function(l){var o=l.attr("validator");if(!o){return true}var w=b[o];var u;switch(l.attr("tagName")){case"SELECT":u=l.val();break;default:u=l[0].value}var t={};var q=[];for(var m=0;m<w.length;m++){var p={};if(w[m].trim){u=$.trim(u)}if(!c(u,l,w[m],p)){return false}q.push(p)}for(var m=0;m<w.length;m++){var r=w[m];if(r.successFunction){var v=q[m];var n=function(){if(r.errorClass&&l){l.removeClass(r.errorClass)}r.successFunction(l||u,v)};if(r.async){setTimeout(n,1)}else{n()}}}return true};ol.form.validator=function(n,l){if(typeof(l)=="object"){var o={};if(c(n,null,l,o)&&l.successFunction){if(l.async){setTimeout(function(){l.successFunction(n,o)},1)}else{l.successFunction(n,o)}}return}var v=n,m=l;var r=jQuery(v);var t=r.attr("tagName");m=(typeof(m)=="boolean"?m:true);switch(t){case"SELECT":case"INPUT":case"TEXTAREA":return d(r)}var q=r.find("select[validator],input[validator],textarea[validator]");var p=true;for(var u=0;u<q.length;u++){if(!d(jQuery(q[u]))){if(m){return false}else{p=false}}}return p};ol.form.validator.register=function(m,l){k[m]=l};ol.form.validator.get=function(l){return k[l]};var f=0;ol.form.validator.bind=function(m,o){var n=[];var r=jQuery(m);o=jQuery.extend({},j,o);if(o.validOnChange){r.unbind("change").bind("change",function(t){ol.form.filter(this);ol.form.validator(this,true)})}for(var p=0;p<r.length;p++){var q=jQuery(r[p]);var l=q.attr("validator");if(!l){l="validator"+(++f)+(new Date()).getTime();q.attr("validator",l)}if(!b[l]){b[l]=[]}b[l].push(o);n.push(l)}return n};ol.form.filter=function(n){if($(n).attr("name")=="consignee"||$(n).attr("id")=="vatInvoice-consignee"||$(n).attr("id")=="contactBy"){var q=/[^a-zA-Z\u4E00-\u9FA5\uFF21-\uFF3A\uFF41-\uFF5A]/g;var l=$("#"+$(n).attr("name")+"-msg");if(q.test($(n).val())){$(n).val(function(){return $(n).val().replace(q,"")});if(l.length){l.addClass("report-errors filter  label-error").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")}else{$(n).next().addClass("report-errors   filter").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")}}else{if(l.length){l.removeClass("filter report-errors icon-error label-error")}else{$(n).next().removeClass("report-errors icon-error  filter")}}}if($(n).attr("name")=="customerName"||$(n).attr("name")=="customerNameNoEncrypt"){var q=/[^a-zA-Z\u4E00-\u9FA5\uFF21-\uFF3A\uFF41-\uFF5A]/g;var l=$("#"+$(n).attr("name")+"-msg");if(q.test($(n).val())){$(n).val(function(){return $(n).val().replace(q,"")});if($(n).val()!=""){$(n).nextAll("span").remove();$(n).parent().append("<span class='vam icon-warn'>\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe,\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26</span>")}else{$(n).nextAll("span").remove()}}else{$(n).nextAll("span").remove()}}if($(n).attr("name")=="address"||$(n).attr("id")=="vatInvoice-address"||$(n).attr("id")=="contactAddress"){var l=$("#"+$(n).attr("name")+"-msg");addressFrontRegex=addressFrontRegex.replaceAll("&amp;","&");addressFrontRegex=addressFrontRegex.replaceAll("&#034;",'"');addressFrontRegex=addressFrontRegex.replaceAll("&lt;","<");addressFrontRegex=addressFrontRegex.replaceAll("&gt;",">");addressFrontRegex=addressFrontRegex.replaceAll("&#039;","'");var o=new RegExp(addressFrontRegex);var m=false;$.each($(n).val().split(""),function(t,r){if(!o.test(r)){m=true}});var p=$(n).val().split("").filter(function(r){return o.test(r)}).join("");if(m){$(n).val(p);if($(n).val()!=""){if(l.length){l.addClass("report-errors filter label-error").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")}else{$(n).next().addClass("report-errors  filter").text("\u4e3a\u4e86\u66f4\u597d\u7684\u9001\u8fbe\uff0c\u5df2\u5e2e\u4f60\u8fc7\u6ee4\u4e0d\u80fd\u8bc6\u522b\u7684\u5b57\u7b26")}}else{l.removeClass("filter")}}else{if(l.length){l.removeClass("filter report-errors icon-error label-error").text("")}else{$(n).next().removeClass("report-errors icon-error  filter")}}}};ol.form.getStrLeng=function(o){var p=0;var l=o.length;var m=-1;for(var n=0;n<l;n++){m=o.charCodeAt(n);if(m>=0&&m<=128){p+=1}else{p+=2}}return p};ol.form.validator.defaults=j;var h=ol.form.validator,y=function(m,l){return !m};h.register("regex",function(m,l){if(l.allowEmpty&&y(m)){return true}if(!l.regex){a("regex","need parameter of 'regex'!");return false}return l.regex.test(m)});h.register("require",function(m,l){l.allowEmpty=false;return !y(m)});h.register("email",function(m,l){if(l.allowEmpty&&y(m)){return true}var n=null;if(l.separater){n=l.separater}return ol.util.isEmail(m,n)});h.register("eq",function(o,l){if(!l.compareTo){a("eq","need parameter of 'compareTo'!");return false}var m=jQuery(l.compareTo).val();if(!l.format){return o==m}var n=h.get("date");if(!(n(o,l)&&n(m,l))){return false}return o.parseDate(l.format).getTime()==m.parseDate(l.format).getTime()});h.register("lt",function(p,m){if(m.allowEmpty&&y(p)){return true}if(!m.compareTo){a("lt","need parameter of 'compareTo'!");return false}var n=jQuery(m.compareTo).val();if(!m.format){m.negative=true;var l=h.get("float");if(!l(p,m)){return false}if(!l(n,m)){return false}p=parseFloat(p);n=parseFloat(n);return p<n}var o=h.get("date");if(!(o(p,m)&&o(n,m))){return false}return p.parseDate(m.format)<n.parseDate(m.format)});h.register("le",function(o,n){var m=h.get("eq");var l=h.get("lt");return m(o,n)||l(o,n)});h.register("gt",function(p,m){if(m.allowEmpty&&y(p)){return true}if(!m.compareTo){a("gt","need parameter of 'compareTo'!");return false}var n=jQuery(m.compareTo).val();if(!m.format){m.negative=true;var l=h.get("float");if(!l(p,m)){return false}if(!l(n,m)){return false}p=parseFloat(p);n=parseFloat(n);return p>n}var o=h.get("date");if(!(o(p,m)&&o(n,m))){return false}return p.parseDate(m.format)>n.parseDate(m.format)});h.register("ge",function(o,n){var l=h.get("eq");var m=h.get("gt");return l(o,n)||m(o,n)});h.register("length",function(n,m){if(m.allowEmpty&&y(n)){return true}if(!(m.min||m.max)){a("length","need parameter of 'min' or 'max'!");return false}var l=ol.form.getStrLeng(n);if(m.min&&l<m.min){return false}if(m.max&&l>m.max){return false}return true});h.register("range",function(o,n){if(n.allowEmpty&&y(o)){return true}if(!(n.min||n.max)){a("range","need parameter of 'min' or 'max'!");return false}n.negative=true;var m=h.get("float");if(!m(o,n)){return false}var l=parseFloat(o);if(n.min&&l<n.min){return false}if(n.max&&l>n.max){return false}return true});h.register("chinese",function(m,l){if(l.allowEmpty&&y(m)){return true}l.regex=/^[\u4E00-\u9FA5]$/;return h.get("regex")(m,l)});h.register("int",function(m,l){if(l.allowEmpty&&y(m)){return true}if(l.negative){l.regex=/^[-]?\d+$/}else{l.regex=/^\d+$/}return h.get("regex")(m,l)});h.register("float",function(m,l){if(l.allowEmpty&&y(m)){return true}if(l.negative){l.regex=/^[-]?\d+(\.\d+)?$/}else{l.regex=/^\d+(\.\d+)?$/}return h.get("regex")(m,l)});h.register("date",function(p,n){if(n.allowEmpty&&y(p)){return true}if(!n.format){g("date","need parameter of 'format'!");return false}var o={"\\.":"\\.","M+":"(0[1-9]|[1-9]|1[0-2])","d+":"(0[1-9]|[1-9]|[12][0-9]|3[01])","y+":"(\\d{4})","H+":"([0-9]|[01][0-9]|2[0-3])","m+":"([0-9]|[0-5][0-9])","s+":"([0-9]|[0-5][0-9])",S:"(\\d+)"};var l=n.format;for(var m in o){if(new RegExp("("+m+")").test(n.format)){l=l.replace(RegExp.$1,o[m])}}n.regex=new RegExp("^"+l+"$");if(!h.get("regex")(p,n)){return false}return p==p.parseDate(n.format).format(n.format)});h.register("url",function(m,l){if(l.allowEmpty&&y(m)){return true}if(m.startWith("http://")){m=m.substring(7)}else{if(m.startWith("https://")){m=m.substring(8)}else{if(l.requireProtocol){return false}}}if(!m){return false}l.regex=/^[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/;return h.get("regex")(m,l)})})();(function(){var r=ol.template=function(j){this.init=function(){j=d(j);var l;for(var k=0;k<j.length;k++){l=f(j[k]);h[l[0]]=b(l)}};this.parse=function(k,l){if(!k||!(k=h[k])){return""}return g(k,l)};this.init()};r.parse=function(j,k){var l=g(b(f(j)),k);return l};r.startDelimiter="<!--";r.endDelimiter="-->";var h={},a=new RegExp(r.startDelimiter+"#macro \\S+\\s*\\w*"+r.endDelimiter+"[\\s\\S]*?"+r.startDelimiter+"/#macro"+r.endDelimiter,"g"),d=function(j){return j.match(a)},c=new RegExp("("+r.startDelimiter+"(/?)#([\\s\\S]*?)"+r.endDelimiter+")|(')|([\r\n\t])|({#([^}]*?)})","g"),f=function(l){var q=l.replace(c,function(x,I,t,H,J,K,w,y){if(I){return"\n"+(t?"-":"+")+H.replace(/[\r\n\t]/g,"")+"\n"}if(J){return"\\'"}if(K){return""}if(w){var C=y.indexOf("?");if(C!=0){switch(y.substring(C+1)){case"html":y="ol.util.escapeHtml("+y.substring(0,C)+")";break;case"js_string":y=y.replace(/\"/g,'\\"').replace(/\r\n/g,"\\r\\n").replace(/\n/g,"\\n");break}}y=y.replace(/\'/g,"\\'");return"'+("+y+")+'"}});q=q.split(/\n/);var u,m,o,v,k,n=["var f=[];"];for(var z=0;z<q.length;z++){u=q[z];if(!u){continue}m=u.charAt(0);if(m!=="+"&&m!=="-"){n.push("f.push('"+u+"');");continue}o=u.split(/\s/);switch(o[0]){case"+macro":v=o[1];k=o[2];n.push('f.push("<!--'+v+' start-->");');break;case"-macro":n.push('f.push("<!--'+v+' end-->");');break;case"+elseif":o.splice(0,1);n.push("}else if"+o.join(" ")+"{");break;case"+else":n.push("}else{");break;case"+if":case"+for":case"+switch":o[0]=o[0].substr(1);n.push(o.join(" ")+"{");break;case"+case":case"+default":o[0]=o[0].substr(1);n.push(o.join(" ")+":");break;case"-switch":case"-for":case"-if":n.push("}");break;case"+list":if(o.length!=4){throw v+": list command error!"}var p=o[3]+"_index",A=o[3]+"_length",j=o[3]+"_num";n.push("if("+o[1]+".constructor === Array){");n.push("var "+o[3]+";");n.push("var "+A+"="+o[1]+".length;");n.push("var "+p+";");n.push("for(var "+j+"="+A+";"+j+"--;){");n.push(p+"="+A+"-"+j+"-1;");n.push(o[3]+"="+o[1]+"["+p+"];");break;case"-list":n.push("}}");break;case"+break":n.push("break;");break;case"-list":n.push("}}}");break;case"+eval":o.splice(0,1);n.push(o.join(" "));break;case"+var":o[0]=o[0].substr(1);n.push(o.join(" ")+";");break;default:break}}n.push("return f.join('');");return[v,k||"data",n.join("")]},b=function(j){try{return new Function(j[1],j[2])}catch(k){logger.error("template:"+j[0],k)}},g=function(j,k){return j(k)}})();
